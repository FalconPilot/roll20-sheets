<!-- Sheet code -->
<div class="sheet-bm-sheet">

  <!-- Sheet header -->
  <div class="sheet-bm-header">
    <h1 class="sheet-bm-title">Blood Money</h1>
  </div>

  <!-- Sheet body -->
  <div class="sheet-bm-main sheet-flex-col">

    <!-- HP and carry capacity -->
    <div class="sheet-flex-row sheet-center-v sheet-center-h">
      <input type="number" value="0" name="attr_hp_cur"/>
      <span>&nbsp;/ (&nbsp;</span>
      <input type="number" value="8 + @{end_fact}" disabled name="attr_hp_base"/>
      <span>&nbsp;+&nbsp;</span>
      <input type="number" value="0" name="attr_hp_bon"/>
      <span>&nbsp;)</span>
    </div>

    <!-- Character informations -->
    <h2>Informations</h2>
    <div class="sheet-flex-col sheet-flex-up">
      <div class="sheet-flex-row sheet-top-wrapper">
        <div class="sheet-flex-col center-h">
          <label>Âge</label>
          <div class="sheet-flex-row sheet-center-v">
            <input type="number" min="0" value="18" name="attr_age"/>
            <span>ans</span>
          </div>
        </div>
        <div class="sheet-flex-col sheet-center-h">
          <label>Taille</label>
          <div class="sheet-flex-row sheet-center-v">
            <input type="number" min="1" max="2" value="1" name="attr_heightmeters"/>
            <span>m</span>
            <input type="number" min="0" max="99" value="0" name="attr_heightcentimeters"/>
            <span>cm</span>
          </div>
        </div>
        <div class="sheet-flex-col sheet-center-h">
          <label>Archétype</label>
          <select name="attr_archetype">
            <option value="custom">Personnalisé</option>
            <option value="racaille_des_rues">Racaille des rues</option>
          </select>
        </div>
        <div class="sheet-flex-col sheet-center-h">
          <label>Expérience</label>
          <div class="sheet-flex-row sheet-center-v">
            <input type="number" min="0" max="100" value="0" name="attr_xp"/>
            <span>&#47; 100</span>
          </div>
        </div>
      </div>
      <div class="sheet-flex-row">
        <label class="sheet-flex-up">Nom</label>
        <input type="text" class="sheet-info-input" name="attr_name"/>
      </div>
      <div class="sheet-flex-row">
        <label class="sheet-flex-up">Surnom</label>
        <input type="text" class="sheet-info-input" name="attr_nickname"/>
      </div>
    </div>

    <!-- Caracs -->
    <h2>Caractéristiques</h2>
    <table class="sheet-caracs">

      <!-- Caracs head -->
      <thead>
        <tr class="sheet-head-maj">
          <th colspan="4" class="sheet-head-phy">Physique</th>
          <th colspan="4" class="sheet-head-men">Mental</th>
          <th colspan="4" class="sheet-head-soc">Social</th>
        </tr>
        <tr>
          <th colspan="4" class="sheet-head-phy">
            <input type="number" value="@{str_tot} + @{end_tot} + @{agi_tot} + @{dex_tot} + 10" name="attr_phy_score" disabled/>
            <span>%</span>
          </th>
          <th colspan="4" class="sheet-head-men">
            <input type="number" value="@{int_tot} + @{sav_tot} + @{acu_tot} + @{cou_tot} + 10" name="attr_men_score" disabled/>
            <span>%</span>
          </th>
          <th colspan="4" class="sheet-head-soc">
            <input type="number" value="@{pre_tot} + @{sed_tot} + @{elo_tot} + @{emp_tot} + 10" name="attr_soc_score" disabled/>
            <span>%</span>
          </th>
        </tr>
        <tr>

          <!-- PHY rolls -->
          <th class="sheet-head-phy">
            <button type="roll" value="&{template:carac} {{type=phy}} {{name=Test de force}} {{roll=[[((21 - 1D20) - @{str_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-phy">
            <button type="roll" value="&{template:carac} {{type=phy}} {{name=Test d'endurance}} {{roll=[[((21 - 1D20) - @{end_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-phy">
            <button type="roll" value="&{template:carac} {{type=phy}} {{name=Test d'agilité}} {{roll=[[((21 - 1D20) - @{agi_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-phy">
            <button type="roll" value="&{template:carac} {{type=phy}} {{name=Test de dextérité}} {{roll=[[((21 - 1D20) - @{dex_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>

          <!-- MEN rolls -->
          <th class="sheet-head-men">
            <button type="roll" value="&{template:carac} {{type=men}} {{name=Test d'intellect}} {{roll=[[((21 - 1D20) - @{int_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-men">
            <button type="roll" value="&{template:carac} {{type=men}} {{name=Test de savoir}} {{roll=[[((21 - 1D20) - @{sav_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-men">
            <button type="roll" value="&{template:carac} {{type=men}} {{name=Test d'acuité}} {{roll=[[((21 - 1D20) - @{acu_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-men">
            <button type="roll" value="&{template:carac} {{type=men}} {{name=Test de courage}} {{roll=[[((21 - 1D20) - @{cou_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>

          <!-- SOC rolls -->
          <th class="sheet-head-soc">
            <button type="roll" value="&{template:carac} {{type=soc}} {{name=Test de présence}} {{roll=[[((21 - 1D20) - @{pre_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-soc">
            <button type="roll" value="&{template:carac} {{type=soc}} {{name=Test de séduction}} {{roll=[[((21 - 1D20) - @{sed_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-soc">
            <button type="roll" value="&{template:carac} {{type=soc}} {{name=Test d'éloquence}} {{roll=[[((21 - 1D20) - @{elo_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
          <th class="sheet-head-soc">
            <button type="roll" value="&{template:carac} {{type=soc}} {{name=Test d'empathie}} {{roll=[[((21 - 1D20) - @{emp_tot} / 10) * (-1)]]}} {{character=@{name}}}"></button>
          </th>
        </tr>
        <tr>
          <th class="sheet-head-phy">FOR</th>
          <th class="sheet-head-phy">END</th>
          <th class="sheet-head-phy">AGI</th>
          <th class="sheet-head-phy">DEX</th>
          <th class="sheet-head-men">INT</th>
          <th class="sheet-head-men">SAV</th>
          <th class="sheet-head-men">ACU</th>
          <th class="sheet-head-men">COU</th>
          <th class="sheet-head-soc">PRE</th>
          <th class="sheet-head-soc">SED</th>
          <th class="sheet-head-soc">ELO</th>
          <th class="sheet-head-soc">EMP</th>
        </tr>
        <tr class="sheet-head-sub">
          <th class="sheet-head-phy">Force</th>
          <th class="sheet-head-phy">Endurance</th>
          <th class="sheet-head-phy">Agilité</th>
          <th class="sheet-head-phy">Dextérité</th>
          <th class="sheet-head-men">Intellect</th>
          <th class="sheet-head-men">Savoir</th>
          <th class="sheet-head-men">Acuité</th>
          <th class="sheet-head-men">Courage</th>
          <th class="sheet-head-soc">Présence</th>
          <th class="sheet-head-soc">Séduction</th>
          <th class="sheet-head-soc">Eloquence</th>
          <th class="sheet-head-soc">Empathie</th>
        </tr>
      </thead>

      <!-- Caracs body -->
      <tbody>
        <tr class="sheet-row-base">

          <!-- PHY base -->
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_str_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_end_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_agi_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_dex_base"/>
          </td>

          <!-- MEN base -->
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_int_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_sav_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_acu_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_cou_base"/>
          </td>

          <!-- SOC base -->
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_pre_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_sed_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_elo_base"/>
          </td>
          <td>
            <input type="number" value="6" min="1" max="20" name="attr_emp_base"/>
          </td>
        </tr>

        <tr class="sheet-row-bon">

          <!-- PHY bon -->
          <td>
            <input type="number" value="0" name="attr_str_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_end_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_agi_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_dex_bon"/>
          </td>

          <!-- MEN bon -->
          <td>
            <input type="number" value="0" name="attr_int_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_sav_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_acu_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_cou_bon"/>
          </td>

          <!-- SOC bon -->
          <td>
            <input type="number" value="0" name="attr_pre_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_sed_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_elo_bon"/>
          </td>
          <td>
            <input type="number" value="0" name="attr_emp_bon"/>
          </td>
        </tr>

        <tr class="sheet-row-tot">

          <!-- PHY tot -->
          <td class="sheet-body-phy">
            <input type="number" value="@{str_base} + @{str_bon}" name="attr_str_tot" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="@{end_base} + @{end_bon}" name="attr_end_tot" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="@{agi_base} + @{agi_bon}" name="attr_agi_tot" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="@{dex_base} + @{dex_bon}" name="attr_dex_tot" disabled/>
          </td>

          <!-- MEN tot -->
          <td class="sheet-body-men">
            <input type="number" value="@{int_base} + @{int_bon}" name="attr_int_tot" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="@{sav_base} + @{sav_bon}" name="attr_sav_tot" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="@{acu_base} + @{acu_bon}" name="attr_acu_tot" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="@{cou_base} + @{cou_bon}" name="attr_cou_tot" disabled/>
          </td>

          <!-- SOC tot -->
          <td class="sheet-body-soc">
            <input type="number" value="@{pre_base} + @{pre_bon}" name="attr_pre_tot" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="@{sed_base} + @{sed_bon}" name="attr_sed_tot" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="@{elo_base} + @{elo_bon}" name="attr_elo_tot" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="@{emp_base} + @{emp_bon}" name="attr_emp_tot" disabled/>
          </td>
        </tr>

        <!-- Factors -->
        <tr class="sheet-row-fact">

          <!-- PHY fact -->
          <td class="sheet-body-phy">
            <input type="number" value="floor((@{str_tot} - 10) / 2)" name="attr_str_fact" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="floor((@{end_tot} - 10) / 2)" name="attr_end_fact" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="floor((@{agi_tot} - 10) / 2)" name="attr_agi_fact" disabled/>
          </td>
          <td class="sheet-body-phy">
            <input type="number" value="floor((@{dex_tot} - 10) / 2)" name="attr_dex_fact" disabled/>
          </td>

          <!-- MEN fact -->
          <td class="sheet-body-men">
            <input type="number" value="floor((@{int_tot} - 10) / 2)" name="attr_int_fact" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="floor((@{sav_tot} - 10) / 2)" name="attr_sav_fact" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="floor((@{acu_tot} - 10) / 2)" name="attr_acu_fact" disabled/>
          </td>
          <td class="sheet-body-men">
            <input type="number" value="floor((@{cou_tot} - 10) / 2)" name="attr_cou_fact" disabled/>
          </td>

          <!-- SOC fact -->
          <td class="sheet-body-soc">
            <input type="number" value="floor((@{pre_tot} - 10) / 2)" name="attr_pre_fact" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="floor((@{sed_tot} - 10) / 2)" name="attr_sed_fact" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="floor((@{elo_tot} - 10) / 2)" name="attr_elo_fact" disabled/>
          </td>
          <td class="sheet-body-soc">
            <input type="number" value="floor((@{emp_tot} - 10) / 2)" name="attr_emp_fact" disabled/>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Skills -->
    <h2>Compétences</h2>
    <div class="">
    </div>

    <!-- Traits -->
    <h2>Traits</h2>
    <div class="">
    </div>

  </div>
</div>

<!-- Roll templates -->
<rolltemplate class="sheet-rolltemplate-carac">
  <table>
    <thead>
      <tr>
        <th colspan="2" class="sheet-head-{{type}}">{{name}}</th>
      </tr>
    </thead>
    <tbody>
      {{#character}}
        <tr>
          <td>Personnage</td>
          <td>{{character}}</td>
        </tr>
      {{/character}}
      {{#roll}}
        <tr>
          <td>Résultat</td>
          <td>{{roll}}</td>
        </tr>
      {{/roll}}
    </tbody>
  </table>
</rolltemplate>
